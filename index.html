<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Kirim Pesan Customer - Ion Network</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background:#f0f4f8;
      padding:20px;
    }
    h2 {
      text-align:center;
    }
    form {
      background:#fff;
      padding:20px;
      border-radius:10px;
      box-shadow:0 4px 8px rgba(0,0,0,0.1);
      max-width:420px;
      margin:auto;
    }
    label {
      display:block;
      margin-top:10px;
      font-weight:bold;
    }
    input, select, button {
      width:100%;
      padding:10px;
      margin-top:5px;
      border-radius:6px;
      border:1px solid #ccc;
      font-size:14px;
    }
    button {
      background:#0d6efd;
      color:#fff;
      border:none;
      margin-top:15px;
      cursor:pointer;
      font-weight:bold;
    }
    button:hover {
      background:#0b5ed7;
    }
    .hidden {display:none;}
  </style>
</head>
<body>
  <h2>Kirim Pesan Customer - ION NETWORK</h2>
  <form id="waForm">
    <label for="template">Pilih Template Pesan:</label>
    <select id="template" name="template" required>
      <option value="">-- Pilih Template --</option>
      <option value="panduan">Panduan Akun</option>
      <option value="konfirmasi">Konfirmasi Pemasangan</option>
      <option value="maintenance">Konfirmasi Maintenance</option>
      <option value="terminate">Terminate (Pengambilan Perangkat)</option>
    </select>

    <div id="extraFields" class="hidden">
      <label for="nama">Nama:</label>
      <input type="text" id="nama" placeholder="Masukkan nama">

      <label for="idPelanggan">ID Pelanggan:</label>
      <input type="tel" id="idPelanggan" placeholder="Masukkan ID pelanggan" inputmode="numeric">

      <label for="sandi">Sandi Aplikasi:</label>
      <input type="text" id="sandi" placeholder="Masukkan sandi aplikasi">
    </div>

    <label for="target">Target Nomor WhatsApp:</label>
    <input type="tel" id="target" placeholder="Contoh: 08123456789" inputmode="numeric" required>

    <button type="submit">Kirim Pesan</button>
  </form>

  <script>
    const form = document.getElementById("waForm");
    const templateSelect = document.getElementById("template");
    const extraFields = document.getElementById("extraFields");

    templateSelect.addEventListener("change", () => {
      if (templateSelect.value === "panduan") {
        extraFields.classList.remove("hidden");
      } else {
        extraFields.classList.add("hidden");
      }
    });

    form.addEventListener("submit", function(e) {
      e.preventDefault();

      let target = document.getElementById("target").value.trim();
      const template = templateSelect.value;

      // Format nomor WA
      if (target.startsWith("08")) {
        target = "628" + target.slice(2);
      }
      if (!/^\d{10,15}$/.test(target)) {
        alert("Nomor WhatsApp tidak valid. Minimal 10 digit angka.");
        return;
      }

      let message = "";

      switch(template) {
        case "panduan":
          const nama = document.getElementById("nama").value.trim() || "[Nama]";
          const idPelanggan = document.getElementById("idPelanggan").value.trim() || "[ID]";
          const sandi = document.getElementById("sandi").value.trim() || "[Sandi]";
          message =
`Panduan Lengkap Pembayaran, Penggantian Sandi, dan Komplain WiFi Ion Network
Yth. Bapak/Ibu,

Untuk memudahkan Anda dalam melakukan pembayaran, penggantian sandi, dan komplain WiFi Ion Network, kami sediakan panduan lengkap berikut:

Akses Panduan
Silakan akses link berikut untuk melihat panduan lengkap : ( https://ionnetworksubang.github.io/Ion-network )

Informasi Akun
- NAMA : ${nama}
- ID PELANGGAN : ${idPelanggan}
- SANDI APK : ${sandi}
- LINK APK : https://play.google.com/store/apps/details?id=com.ionboardband.memberionapps

Peringatan
Mohon jangan menyebarluaskan informasi akun Anda kepada orang lain.

Hormat kami,
Tim Ion Network`;
          break;
        case "konfirmasi":
          message = "Assalamualaikum, saya teknisi dari *ION NETWORK*. Saya ingin mengkonfirmasi jadwal pemasangan WiFi di rumah BP/ibu. Apakah bp/ibu berkenan untuk di pasang hari ini? Terima kasih.";
          break;
        case "maintenance":
          message = "Assalamualaikum, saya teknisi dari *ION NETWORK*. Saya ingin mengkonfirmasi jadwal Perbaikan WiFi di rumah BP/ibu. Apakah bp/ibu berkenan untuk di perbaiki hari ini? Terima kasih.";
          break;
        case "terminate":
          message = "Assalamualaikum, saya teknisi dari *ION NETWORK*. Ingin menginformasikan untuk pengambilan perangkat yang sudah berhenti berlangganan, terimakasih.";
          break;
        default:
          alert("Silakan pilih template pesan terlebih dahulu.");
          return;
      }

      const waLink = `https://wa.me/${target}?text=${encodeURIComponent(message)}`;
      window.open(waLink, "_blank");
    });
  </script>
</body>
  </html>
  
